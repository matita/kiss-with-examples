<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>KISS explained</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css" id="theme">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">

    <style>
      .reveal blockquote p {
        text-align: left;
        margin-left: 20px;
        margin-right: 20px;
        display: block!important;
      }
      .reveal blockquote cite {
        display: block;
        text-align: right;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h2>UX of code</h2>
          <h2>+</h2>
          <h2>KISS explained</h2>

          <p>by Matteo Colucci</p>
        </section>

        <section id="ux-of-code">
          <section>
            <h2>UX of code</h2>
          </section>

          <section>
            <blockquote>
              <p>Any sufficiently advanced technology is indistinguishable from magic.</p>
              <p><cite>– Arthur C. Clarke</cite></p>
            </blockquote>
          </section>

          <section>
            Non-devs might think software is actually magic
          </section>

          <section>
            <blockquote>
              <p>Wizards don't believe in magic.</p>
              <p><cite>– Matteo Colucci</cite></p>
            </blockquote>

            <small class="fragment">I could talk for hours about this pointless nerdy topic, feel free to hit me up ;)</small>
          </section>

          <section>
            Devs know how to speak to machines
          </section>

          <section>
            <blockquote>
              <p>With great power comes great responsibility.</p>
              <p><cite>– Uncle Ben</cite></p>
            </blockquote>
          </section>

          <section>
            <p>Devs are interpreters between users and machines</p>
            <p class="fragment">Devs are users of other devs' code</p>
            <p class="fragment">Devs are interpreters between machines and other devs</p>
          </section>

          <section>
            <ul>
              <li>Maintainable code &gt; performant code</li>
              <ul>
                <li class="fragment">we work in a team with different levels of expertise</li>
                <li class="fragment">specs change constantly (sometimes rapidly)</li>
                <li class="fragment">compilers optimize code</li>
              </ul>
              <li class="fragment">otherwise we'll all be writing ASM</li>
            </ul>
          </section>
        </section>

        <section id="kiss">
          <section>
            <h2>KISS principle</h2>
            <p>Keep It Simple, Stupid</p>
          </section>

          <section>
            <blockquote>
              <p>Complicating is easy, simplifying is difficult.</p>
              <p><cite>- Bruno Munari</cite></p>
            </blockquote>
          </section>

          <section>
            <p>5 corollaries of KISS</p>
            <small>with real-life examples</small>
          </section>

          <section>
            <p>Premises:</p>
            <ul>
              <li class="fragment">We'll see "bad code" examples, but</li>
              <li class="fragment">There's no point in blaming devs</li>
              <li class="fragment">
                <q>Perfect is the enemy of good</q>
                <ul>
                  <li>bad code that works now<br>is better than<br>perfect code that will work in months</li>
                </ul>
              </li>
              <li class="fragment">It's just my opinion</li>
            </ul>
          </section>
        </section>

        <section id="keep-it-linear">
          <section><h2>Keep it linear</h2></section>

          <section>
            <p>Here is current CS behaviour, in pseudo-code:</p>
          </section>

          <section>
            <p>boot.js</p>
            <pre><code data-line-numbers="|4,7|10-14|13"><script type="text/template">
              getConfigurationWithDefaults();
              if (isTcfEnabled()) {
                loadTcfLib(function() {
                  createInstance(options);
                });
              } else {
                createInstance(options);
              }

              function createInstance(options) {
                _iub.cs = new CookieSolution(options);
                var remoteConf = loadRemoteConfig(_iub.cs);
                _iub.cs.preLoad();
              }
            </script></code></pre>
          </section>

          <section>
            <p>iubenda_cookie_solution.js</p>
            <pre><code data-line-numbers="4-16|15"><script type="text/template">
              function CookieSolution(options) {
                // ...

                this.preLoad = function() {
                  if (isBrowserNotSupported()) {
                    return;
                  }

                  if (isBot()) {
                    return applyConsent(true);
                  }

                  loadCcpaConsent();
                  loadTcfConsent();
                  loadLocalConsent();
                };
              }
            </script></code></pre>
          </section>

          <section>
            <p>cookie.js</p>
            <pre><code data-line-numbers="|4-5|7"><script type="text/template">
              function loadLocalConsent() {
                var consent = loadLocalCookie('_iub_cs-' + cookiePolicyId);
                if (consent) {
                  _iub.cs.consent = consent;
                  _iub.cs.start();
                } else {
                  loadRemoteConsent();
                }
              }
            </script></code></pre>
          </section>

          <section>
            <p>cookie.js</p>
            <pre><code data-line-numbers="|6"><script type="text/template">
              function loadRemoteConsent() {
                var consent = loadRemoteCookie('_iub_cs-' + cookiePolicyId);
                if (consent) {
                  _iub.cs.consent = consent;
                }
                _iub.cs.start();
              }
            </script></code></pre>
          </section>

          <section>
            <p>iubenda_cookie_solution.js</p>
            <pre><code data-line-numbers="|6"><script type="text/template">
              this.start = function() {
                tracker.start();
                if (somePreferencesAreMissing()) {
                  ui.start();
                } else {
                  activateBlockedScripts();
                }
              }
            </script></code></pre>
          </section>

          <section>
            <p>So we have a nested behaviour:</p>
            <ul class="fragment">
              <li>
                boot.js :: init
                <ul class="fragment">
                  <li>
                    boot.js :: createInstance
                    <ul class="fragment">
                      <li>
                        iubenda_cookie_solution.js :: preLoad
                        <ul class="fragment">
                          <li>
                            cookie.js :: loadLocalConsent
                            <ul class="fragment">
                              <li>iubenda_cookie_solution.js :: start</li>
                              <li>
                                cookie.js :: loadRemoteConsent
                                <ul class="fragment">
                                  <li>iubenda_cookie_solution.js :: start</li>
                                </ul>
                              </li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </section>

          <section>
            <p>Why it's bad:</p>
            <ul>
              <li class="fragment">a single function does a lot of things</li>
              <li class="fragment">their name is a lie</li>
              <li class="fragment">you have to read the whole code to know what's going on</li>
              <li class="fragment">modules don't have a clear hierarchy</li>
              <li class="fragment">modules change properties of other modules</li>
              <li class="fragment">changing order of things is hard</li>
            </ul>
          </section>

          <section>
            <p>How it could be:</p>
            <pre><code><script type="text/template">
              function init() {
                getConfigurationWithDefaults();
                loadDependencies(options);
                loadPreferences();
                if (somePreferencesAreMissing()) {
                  showBanner();
                } else {
                  activateBlockedScripts();
                }
              }
            </script></code></pre>
          </section>
        </section>

        <section id="separate-actions">
          <section>
            <h2>Logically (and graphically) separate actions</h2>
            <p>(mostly if they're duplicated)</p>
          </section>

          <section>
            <pre><code>
              floatingPreferencesButtonCaption: true
            </code></pre>
            <p>English</p>
            <img src="http://matteo.colucci.s3.iubenda.com/Screen-Shot-2020-10-11-17-38-48.png">
            <p>Italian</p>
            <img src="http://matteo.colucci.s3.iubenda.com/Screen-Shot-2020-10-11-17-41-08.png">
          </section>

          <section>
            <pre><code>
              floatingPreferencesButtonCaption: 'Privacy'
            </code></pre>
            <img src="http://matteo.colucci.s3.iubenda.com/Screen-Shot-2020-10-11-17-42-23.png">
          </section>

          <section>
            <pre><code>
              floatingPreferencesButtonCaption: false // (default)
            </code></pre>
            <img src="http://matteo.colucci.s3.iubenda.com/Screen-Shot-2020-10-11-17-37-26.png">
          </section>

          <section>
            <p>First code proposal</p>
            <pre><code><script type="text/template">
              if (typeof options.floatingPreferencesButtonCaption === 'string') {
                floatingBtn.setAttribute('data-tp-label', options.floatingPreferencesButtonCaption);
              } else if (options.floatingPreferencesButtonCaption === true) {
                floatingBtn.setAttribute('data-tp-label', t('floating_preferences_button.caption'));
              }
            </script></code></pre>
          </section>

          <section>
            <p>Why it's bad:</p>
            <p class="fragment">if this <u>do this</u> otherwise <u>do that</u></p>
            <p class="fragment">but</p>
            <p class="fragment">do this == do that == display a label</p>
          </section>

          <section>
            <p>What if we have to transform the caption?</p>
            <p class="fragment">We'll likely end up with more duplicate code</p>
          </section>

          <section>
            <p>How it could be:</p>
            <pre><code><script type="text/template">
              var caption;
              if (typeof options.floatingPreferencesButtonCaption === 'string') {
                caption = options.floatingPreferencesButtonCaption;
              } else if (options.floatingPreferencesButtonCaption === true) {
                caption = t('floating_preferences_button.caption');
              }

              if (caption) {
                floatingBtn.setAttribute('data-tp-label', caption);
              }
            </script></code></pre>
          </section>

          <section>
            <p>So we have two clearly separated sections/actions:</p>
            <ol>
              <li class="fragment">get the caption</li>
              <li class="fragment">display the caption (if needed)</li>
            </ol>
          </section>
        </section>

        <section>
          <section>Avoid abstraction if not needed</section>
        </section>

        <section>
          <section>Use pseudo-pseudo-code</section>
        </section>

        <section>
          <section>Use ES6</section>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      document.querySelectorAll('code').forEach(function(code) {
        code.classList.add('js');
        code.setAttribute('data-trim', true);
        if (!code.getAttribute('data-line-numbers')) {
          code.setAttribute('data-line-numbers', true);
        }
      });

      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
      });
    </script>
  </body>
</html>
